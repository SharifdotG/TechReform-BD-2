{% extends "base.html" %} {% load static %} {% load humanize %} {% block title %}Products -
TechReform BD{% endblock %} {% block content %}

<!-- Products Header Section -->
<section class="py-16 bg-base-100 overflow-hidden relative">
    <div class="container mx-auto px-6">
        <!-- Animated background elements -->
        <div class="absolute inset-0 overflow-hidden opacity-5 pointer-events-none">
            <div class="absolute -top-40 -right-40 w-96 h-96 bg-primary/80 rounded-full filter blur-3xl animate-pulse"></div>
            <div class="absolute bottom-20 -left-20 w-72 h-72 bg-secondary/80 rounded-full filter blur-3xl animate-pulse" style="animation-delay: 1s;"></div>
            <div class="absolute top-60 left-1/4 w-40 h-40 bg-yellow-400/50 rounded-full filter blur-2xl animate-pulse" style="animation-delay: 2s;"></div>
        </div>

        <!-- Enhanced Breadcrumb -->
        <nav class="mb-8">
            <ol class="flex flex-wrap items-center p-3 bg-white/80 backdrop-blur-sm rounded-xl shadow-sm border border-gray-100">
                <li class="flex items-center">
                    <a href="{% url 'index' %}" class="text-gray-600 hover:text-primary transition-colors flex items-center group">
                        <i class="lni lni-home mr-1.5 group-hover:scale-110 transform transition-transform"></i>
                        <span class="group-hover:underline">Home</span>
                    </a>
                    <svg class="w-4 h-4 mx-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </li>
                {% if current_category %}
                <li class="flex items-center">
                    <a href="{% url 'product-list' %}" class="text-gray-600 hover:text-primary transition-colors flex items-center group">
                        <i class="lni lni-grid-alt mr-1.5 group-hover:scale-110 transform transition-transform"></i>
                        <span class="group-hover:underline">Products</span>
                    </a>
                    <svg class="w-4 h-4 mx-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </li>
                <li class="text-primary font-medium flex items-center">
                    <span class="bg-primary/10 px-3 py-1 rounded-lg">{{ current_category }}</span>
                </li>
                {% else %}
                <li class="text-primary font-medium flex items-center">
                    <i class="lni lni-grid-alt mr-1.5"></i>
                    <span class="bg-primary/10 px-3 py-1 rounded-lg">Products</span>
                </li>
                {% endif %}
                {% if search_query %}
                <li class="ml-auto">
                    <span class="bg-blue-50 text-blue-700 px-3 py-1.5 rounded-lg text-sm flex items-center">
                        <i class="lni lni-search-alt mr-1.5"></i>
                        "{{ search_query }}"
                    </span>
                </li>
                {% endif %}
            </ol>
        </nav>

        <!-- Section heading with enhanced visual elements -->
        <div class="text-center mb-16 relative">
            <!-- Decorative elements with improved visuals -->
            <div class="absolute inset-x-0 -top-6 flex justify-center opacity-70 pointer-events-none">
            <div class="w-24 h-24 bg-blue-500/20 rounded-full filter blur-xl animate-pulse"></div>
            <div class="w-20 h-20 bg-purple-500/20 rounded-full ml-10 filter blur-xl animate-pulse" style="animation-delay: 0.6s;"></div>
            <div class="w-16 h-16 bg-yellow-500/20 rounded-full ml-12 filter blur-xl animate-pulse" style="animation-delay: 1.2s;"></div>
            </div>

            <!-- Badge with improved animation -->
            <div class="mb-4 inline-block">
            <span class="bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-800 text-sm font-medium px-5 py-2.5 rounded-full inline-flex items-center shadow-sm border border-blue-100 hover:shadow-md transition-all duration-300 transform hover:-translate-y-0.5">
                <i class="lni lni-checkmark-circle mr-2 text-primary"></i>
                Browse Our Premium Collection
            </span>
            </div>

            <!-- Main heading with enhanced typography and 3D effect -->
            <h2 class="text-3xl lg:text-5xl font-bold mb-4 relative z-10">
            <span class="bg-gradient-to-r from-primary via-blue-600 to-secondary bg-clip-text text-transparent drop-shadow-sm">
                Quality PC Components
            </span>
            <span class="block mt-3 text-2xl lg:text-3xl font-semibold text-gray-700">
                at <span class="relative inline-block">
                <span class="absolute inset-x-0 bottom-0 h-3 bg-yellow-200/40 -skew-x-6"></span>
                <span class="relative">Manufacturer's Suggested Retail Price</span>
                </span>
            </span>
            </h2>

            <!-- Animated divider with pulse effect -->
            <div class="relative flex justify-center items-center my-6">
            <div class="w-32 h-1 bg-gray-200 rounded-full"></div>
            <div class="absolute">
                <div class="w-10 h-2 bg-gradient-to-r from-primary to-secondary rounded-full animate-pulse"></div>
            </div>
            </div>

            <!-- Subheading with enhanced typography and highlights -->
            <p class="text-gray-600 max-w-2xl mx-auto text-lg leading-relaxed">
            Explore our extensive collection of
            <span class="relative inline-block px-2">
                <span class="absolute inset-0 bg-primary/10 rounded-lg -rotate-1"></span>
                <span class="relative text-primary font-medium">high-performance components</span>
            </span>
            carefully selected to provide the best
            <span class="relative inline-block px-2">
                <span class="absolute inset-0 bg-secondary/10 rounded-lg rotate-1"></span>
                <span class="relative text-secondary font-medium">price-to-performance ratio</span>
            </span>
            </p>

            <!-- Product counter stats -->
            <div class="flex justify-center gap-8 mt-8">
            <div class="text-center">
                <span class="text-3xl font-bold text-gray-800 block">{{ products.paginator.count|default:'0' }}</span>
                <span class="text-gray-500 text-sm">Total Products</span>
            </div>
            <div class="text-center">
                <span class="text-3xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent block">{{ categories_count|default:'12' }}+</span>
                <span class="text-gray-500 text-sm">Categories</span>
            </div>
            <div class="text-center">
                <span class="text-3xl font-bold text-gray-800 block">{{ brands_count|default:'30' }}+</span>
                <span class="text-gray-500 text-sm">Brands</span>
            </div>
            </div>
        </div>

        <!-- Filter and Search Section -->
        <form method="GET" action="{% url 'product-list' %}" class="flex flex-col md:flex-row justify-between items-start md:items-center mb-24 gap-4">
            <!-- Categories Filter -->
            <div class="flex flex-wrap gap-3">
                <!-- All Products Button -->
                <a href="{% url 'product-list' %}" class="relative group overflow-hidden {% if not current_category %}bg-primary text-white font-medium shadow-md shadow-primary/30{% else %}bg-gray-100 text-gray-700 hover:bg-gray-200{% endif %} px-4 py-2.5 rounded-xl transition-all duration-300 transform hover:-translate-y-1 flex items-center">
                    <span class="relative z-10 flex items-center">
                        <i class="lni lni-grid-alt mr-1.5"></i>
                        All Products
                    </span>
                    {% if not current_category %}
                    <span class="absolute inset-0 bg-gradient-to-r from-primary to-blue-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
                    {% endif %}
                </a>

                <!-- Core Components Group -->
                <div class="flex flex-wrap gap-2">
                    <!-- CPU -->
                    <a href="{% url 'product-list' %}?category=CPU{% if sort_by %}&sort_by={{ sort_by }}{% endif %}{% if search_query %}&search={{ search_query }}{% endif %}"
                       class="relative group overflow-hidden {% if current_category == 'CPU' %}bg-primary text-white font-medium shadow-md shadow-primary/30{% else %}bg-gray-100 text-gray-700 hover:bg-gray-200{% endif %} px-4 py-2.5 rounded-xl transition-all duration-300 transform hover:-translate-y-1 flex items-center">
                        <span class="relative z-10 flex items-center">
                            <i class="lni lni-cpu mr-1.5"></i>
                            CPU
                        </span>
                        {% if current_category != 'CPU' %}
                        <span class="absolute inset-0 bg-gradient-to-r from-primary to-blue-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
                        {% endif %}
                    </a>

                    <!-- Cooler -->
                    <a href="{% url 'product-list' %}?category=Cooler{% if sort_by %}&sort_by={{ sort_by }}{% endif %}{% if search_query %}&search={{ search_query }}{% endif %}"
                       class="relative group overflow-hidden {% if current_category == 'Cooler' %}bg-primary text-white font-medium shadow-md shadow-primary/30{% else %}bg-gray-100 text-gray-700 hover:bg-gray-200{% endif %} px-4 py-2.5 rounded-xl transition-all duration-300 transform hover:-translate-y-1 flex items-center">
                        <span class="relative z-10 flex items-center">
                            <i class="lni lni-cool mr-1.5"></i>
                            Cooler
                        </span>
                        {% if current_category != 'Cooler' %}
                        <span class="absolute inset-0 bg-gradient-to-r from-primary to-blue-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
                        {% endif %}
                    </a>

                    <!-- Motherboard -->
                    <a href="{% url 'product-list' %}?category=Motherboard{% if sort_by %}&sort_by={{ sort_by }}{% endif %}{% if search_query %}&search={{ search_query }}{% endif %}"
                       class="relative group overflow-hidden {% if current_category == 'Motherboard' %}bg-primary text-white font-medium shadow-md shadow-primary/30{% else %}bg-gray-100 text-gray-700 hover:bg-gray-200{% endif %} px-4 py-2.5 rounded-xl transition-all duration-300 transform hover:-translate-y-1 flex items-center">
                        <span class="relative z-10 flex items-center">
                            <i class="lni lni-dashboard mr-1.5"></i>
                            Motherboard
                        </span>
                        {% if current_category != 'Motherboard' %}
                        <span class="absolute inset-0 bg-gradient-to-r from-primary to-blue-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
                        {% endif %}
                    </a>

                    <!-- RAM -->
                    <a href="{% url 'product-list' %}?category=RAM{% if sort_by %}&sort_by={{ sort_by }}{% endif %}{% if search_query %}&search={{ search_query }}{% endif %}"
                       class="relative group overflow-hidden {% if current_category == 'RAM' %}bg-primary text-white font-medium shadow-md shadow-primary/30{% else %}bg-gray-100 text-gray-700 hover:bg-gray-200{% endif %} px-4 py-2.5 rounded-xl transition-all duration-300 transform hover:-translate-y-1 flex items-center">
                        <span class="relative z-10 flex items-center">
                            <i class="lni lni-database mr-1.5"></i>
                            RAM
                        </span>
                        {% if current_category != 'RAM' %}
                        <span class="absolute inset-0 bg-gradient-to-r from-primary to-blue-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
                        {% endif %}
                    </a>
                </div>

                <!-- Storage Dropdown -->
                <div class="dropdown dropdown-hover">
                    <div tabindex="0" role="button"
                         class="relative group overflow-hidden {% if current_category == 'SSD' or current_category == 'HDD' %}bg-primary text-white font-medium shadow-md shadow-primary/30{% else %}bg-gray-100 text-gray-700 hover:bg-gray-200{% endif %} px-4 py-2.5 rounded-xl transition-all duration-300 transform hover:-translate-y-1 flex items-center">
                        <span class="relative z-10 flex items-center">
                            <i class="lni lni-harddisk mr-1.5"></i>
                            Storage
                            <i class="lni lni-chevron-down text-xs ml-1.5 transition-transform duration-300 group-hover:rotate-180"></i>
                        </span>
                        {% if current_category != 'SSD' and current_category != 'HDD' %}
                        <span class="absolute inset-0 bg-gradient-to-r from-primary to-blue-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
                        {% endif %}
                    </div>
                    <ul tabindex="0" class="dropdown-content z-[1] menu p-3 shadow-xl bg-white rounded-xl w-52 mt-1 border border-gray-100 animate-slideDown">
                        <li class="mb-1">
                            <a href="{% url 'product-list' %}?category=SSD{% if sort_by %}&sort_by={{ sort_by }}{% endif %}{% if search_query %}&search={{ search_query }}{% endif %}"
                               class="{% if current_category == 'SSD' %}text-primary font-medium bg-primary/10{% endif %} rounded-lg">
                                <i class="lni lni-ssd mr-1.5"></i> SSD
                            </a>
                        </li>
                        <li>
                            <a href="{% url 'product-list' %}?category=HDD{% if sort_by %}&sort_by={{ sort_by }}{% endif %}{% if search_query %}&search={{ search_query }}{% endif %}"
                               class="{% if current_category == 'HDD' %}text-primary font-medium bg-primary/10{% endif %} rounded-lg">
                                <i class="lni lni-harddisk mr-1.5"></i> HDD
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- GPU -->
                <a href="{% url 'product-list' %}?category=GPU{% if sort_by %}&sort_by={{ sort_by }}{% endif %}{% if search_query %}&search={{ search_query }}{% endif %}"
                   class="relative group overflow-hidden {% if current_category == 'GPU' %}bg-primary text-white font-medium shadow-md shadow-primary/30{% else %}bg-gray-100 text-gray-700 hover:bg-gray-200{% endif %} px-4 py-2.5 rounded-xl transition-all duration-300 transform hover:-translate-y-1 flex items-center">
                    <span class="relative z-10 flex items-center">
                        <i class="lni lni-game mr-1.5"></i>
                        GPU
                    </span>
                    {% if current_category != 'GPU' %}
                    <span class="absolute inset-0 bg-gradient-to-r from-primary to-blue-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
                    {% endif %}
                </a>

                <!-- PSU -->
                <a href="{% url 'product-list' %}?category=Power Supply{% if sort_by %}&sort_by={{ sort_by }}{% endif %}{% if search_query %}&search={{ search_query }}{% endif %}"
                   class="relative group overflow-hidden {% if current_category == 'Power Supply' %}bg-primary text-white font-medium shadow-md shadow-primary/30{% else %}bg-gray-100 text-gray-700 hover:bg-gray-200{% endif %} px-4 py-2.5 rounded-xl transition-all duration-300 transform hover:-translate-y-1 flex items-center">
                    <span class="relative z-10 flex items-center">
                        <i class="lni lni-plug mr-1.5"></i>
                        PSU
                    </span>
                    {% if current_category != 'Power Supply' %}
                    <span class="absolute inset-0 bg-gradient-to-r from-primary to-blue-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
                    {% endif %}
                </a>

                <!-- Casing -->
                <a href="{% url 'product-list' %}?category=Casing{% if sort_by %}&sort_by={{ sort_by }}{% endif %}{% if search_query %}&search={{ search_query }}{% endif %}"
                   class="relative group overflow-hidden {% if current_category == 'Casing' %}bg-primary text-white font-medium shadow-md shadow-primary/30{% else %}bg-gray-100 text-gray-700 hover:bg-gray-200{% endif %} px-4 py-2.5 rounded-xl transition-all duration-300 transform hover:-translate-y-1 flex items-center">
                    <span class="relative z-10 flex items-center">
                        <i class="lni lni-display mr-1.5"></i>
                        Casing
                    </span>
                    {% if current_category != 'Casing' %}
                    <span class="absolute inset-0 bg-gradient-to-r from-primary to-blue-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
                    {% endif %}
                </a>

                <!-- Peripherals Dropdown -->
                <div class="dropdown dropdown-hover">
                    <div tabindex="0" role="button"
                         class="relative group overflow-hidden {% if current_category == 'Monitor' or current_category == 'Keyboard' or current_category == 'Mouse' or current_category == 'Headphone' %}bg-primary text-white font-medium shadow-md shadow-primary/30{% else %}bg-gray-100 text-gray-700 hover:bg-gray-200{% endif %} px-4 py-2.5 rounded-xl transition-all duration-300 transform hover:-translate-y-1 flex items-center">
                        <span class="relative z-10 flex items-center">
                            <i class="lni lni-keyboard mr-1.5"></i>
                            Peripherals
                            <i class="lni lni-chevron-down text-xs ml-1.5 transition-transform duration-300 group-hover:rotate-180"></i>
                        </span>
                        {% if current_category != 'Monitor' and current_category != 'Keyboard' and current_category != 'Mouse' and current_category != 'Headphone' %}
                        <span class="absolute inset-0 bg-gradient-to-r from-primary to-blue-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
                        {% endif %}
                    </div>
                    <ul tabindex="0" class="dropdown-content z-[1] menu p-3 shadow-xl bg-white rounded-xl w-52 mt-1 border border-gray-100 animate-slideDown">
                        <li class="mb-1">
                            <a href="{% url 'product-list' %}?category=Monitor{% if sort_by %}&sort_by={{ sort_by }}{% endif %}{% if search_query %}&search={{ search_query }}{% endif %}"
                               class="{% if current_category == 'Monitor' %}text-primary font-medium bg-primary/10{% endif %} rounded-lg">
                                <i class="lni lni-display mr-1.5"></i> Monitors
                            </a>
                        </li>
                        <li class="mb-1">
                            <a href="{% url 'product-list' %}?category=Keyboard{% if sort_by %}&sort_by={{ sort_by }}{% endif %}{% if search_query %}&search={{ search_query }}{% endif %}"
                               class="{% if current_category == 'Keyboard' %}text-primary font-medium bg-primary/10{% endif %} rounded-lg">
                                <i class="lni lni-keyboard mr-1.5"></i> Keyboards
                            </a>
                        </li>
                        <li class="mb-1">
                            <a href="{% url 'product-list' %}?category=Mouse{% if sort_by %}&sort_by={{ sort_by }}{% endif %}{% if search_query %}&search={{ search_query }}{% endif %}"
                               class="{% if current_category == 'Mouse' %}text-primary font-medium bg-primary/10{% endif %} rounded-lg">
                                <i class="lni lni-mouse mr-1.5"></i> Mice
                            </a>
                        </li>
                        <li>
                            <a href="{% url 'product-list' %}?category=Headphone{% if sort_by %}&sort_by={{ sort_by }}{% endif %}{% if search_query %}&search={{ search_query }}{% endif %}"
                               class="{% if current_category == 'Headphone' %}text-primary font-medium bg-primary/10{% endif %} rounded-lg">
                                <i class="lni lni-headphone mr-1.5"></i> Headphones
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

        <!-- Sorting Options -->
        <div class="flex gap-3 w-full md:w-auto">
            <div class="relative flex-grow md:flex-grow-0 max-w-xs">
                <select name="sort_by" id="sort_by"
                    class="appearance-none bg-white border border-gray-200 rounded-xl pl-4 pr-10 py-3 shadow-md hover:shadow-lg focus:ring-2 focus:ring-primary/20 focus:border-primary focus:outline-none transition-all duration-300 text-gray-700 font-medium w-full cursor-pointer"
                    onchange="this.form.submit()">
                    <option value="featured" {% if sort_by == 'featured' %}selected{% endif %}>
                        Sort By: Featured
                    </option>
                    <option value="price_low_high" {% if sort_by == 'price_low_high' %}selected{% endif %}>
                        Price: Low to High
                    </option>
                    <option value="price_high_low" {% if sort_by == 'price_high_low' %}selected{% endif %}>
                        Price: High to Low
                    </option>
                    <option value="newest" {% if sort_by == 'newest' %}selected{% endif %}>
                        Newest First
                    </option>
                    <option value="best_rated" {% if sort_by == 'best_rated' %}selected{% endif %}>
                        Best Rated
                    </option>
                </select>
                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3.5 text-primary">
                    <i class="lni lni-chevron-down text-sm transition-transform group-hover:rotate-180"></i>
                </div>
                <div class="absolute inset-0 rounded-xl pointer-events-none border border-transparent group-focus-within:border-primary/30 group-focus-within:shadow-lg transition-all duration-300"></div>
            </div>
            {% if current_category %}
            <input type="hidden" name="category" value="{{ current_category }}">
            {% endif %}
            {% if search_query %}
            <input type="hidden" name="search" value="{{ search_query }}">
            {% endif %}
        </div>
    </form>
</section>

<!-- Products Grid Section -->
<section class="pb-20 pt-4 bg-base-100 overflow-hidden">
    <div class="container mx-auto px-6">
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
            {% for product in products %}            <!-- Product Card with Enhanced Design -->
            <div class="bg-white shadow-lg rounded-2xl overflow-hidden transition-all duration-500 hover:shadow-2xl transform hover:-translate-y-2 group border border-gray-100">
                <div class="relative overflow-hidden h-64">
                    <!-- Hot Sale Ribbon for Major Discounts -->
                    {% if product.regular_price and product.price < product.regular_price and product.discount_percentage > 15 %}
                    <div class="absolute top-0 right-0 z-10">
                        <div class="bg-gradient-to-r from-orange-500 to-red-500 text-white text-xs transform rotate-45 origin-bottom-left py-1 px-8 translate-x-6 -translate-y-1 shadow-md">
                            HOT DEAL
                        </div>
                    </div>
                    {% endif %}

                    <!-- Product Image with Enhanced Display -->
                    <div class="relative w-full h-full overflow-hidden bg-gradient-to-b from-gray-50 to-gray-100">
                        {% if product.image1 %}
                        <img src="{{ product.image1.url }}" alt="{{ product.brand }} {{ product.model }}"
                             class="w-full h-full object-contain object-center transition-all duration-700 group-hover:scale-110 p-2 mix-blend-multiply"
                             loading="lazy">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                        {% else %}
                        <img src="{% static 'index/images/placeholder-product.jpg' %}" alt="{{ product.brand }} {{ product.model }}"
                             class="w-full h-full object-contain object-center transition-all duration-700 group-hover:scale-110 p-2 opacity-80">
                        <div class="absolute inset-0 bg-gradient-to-t from-gray-200/50 to-transparent"></div>
                        {% endif %}
                        <!-- View Details button that appears only on hover -->
                        <a href="{% url 'product-detail' product.id|stringformat:'s' %}"
                            class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 bg-black/30 hover:bg-black/50 transition-all duration-300 rounded-lg text-white font-semibold text-lg shadow-md shadow-black/30 transform hover:scale-105">
                             <i class="lni lni-eye mr-2"></i> View Details
                        </a>
                        <!-- Brand badge -->
                        <div class="absolute bottom-3 left-3 bg-white/80 backdrop-blur-sm px-2 py-1 rounded-md text-xs font-medium text-gray-700 shadow-sm">
                            {{ product.brand }}
                        </div>
                    </div>
                </div>

                <!-- Product Information -->
                <div class="p-5">
                    <!-- Enhanced Product Ratings -->
                    <div class="flex items-center mb-2 group">
                        <div class="flex items-center bg-gradient-to-r from-amber-50 to-transparent px-2 py-1.5 rounded-lg transition-all duration-300 group-hover:shadow-md group-hover:from-amber-100 border border-transparent group-hover:border-amber-200/50">
                            <!-- Dynamic star rating with improved visuals -->
                            <div class="flex text-amber-400 mr-2 transition-transform duration-300 group-hover:scale-110 origin-left">
                                {% with ''|center:5 as range %}
                                {% for _ in range %}
                                    <i class="{% if forloop.counter <= product.rating_value|default:4 %}lni lni-star-filled{% elif forloop.counter|add:'-0.5' <= product.rating_value|default:4 %}lni lni-star-half{% else %}lni lni-star text-amber-200{% endif %} text-sm md:text-base {% if forloop.counter <= product.rating_value|default:4 %}animate-pulse-subtle{% endif %}" style="animation-delay: {{ forloop.counter|add:'-1' }}00ms;"></i>
                                {% endfor %}
                                {% endwith %}
                            </div>
                            <div class="flex items-center">
                                <span class="text-xs font-semibold bg-gradient-to-r from-amber-700 to-amber-500 bg-clip-text text-transparent">
                                    {{ product.rating_value|default:"4.5" }}
                                </span>
                                <span class="mx-1 text-gray-300 text-xs">|</span>
                                <span class="text-xs text-gray-500">
                                    {{ product.review_count|default:forloop.counter|add:12 }} reviews
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- Product Title with Enhanced Design -->
                    <h3 class="group">
                        <a href="{% url 'product-detail' product.id|stringformat:'s' %}"
                           class="block text-lg font-bold h-14 line-clamp-2 relative transition-all duration-300">
                            <span class="bg-gradient-to-br from-gray-900 via-blue-900 to-purple-800 bg-clip-text text-transparent
                                   group-hover:from-primary group-hover:via-blue-500 group-hover:to-indigo-600 transition-all duration-300">
                                {{ product.brand }} {{ product.model }}
                            </span>
                            <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-blue-500 via-primary to-purple-500
                                   transition-all duration-500 group-hover:w-full rounded-full shadow-md opacity-70 group-hover:opacity-100"></span>
                            <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-blue-300/30 blur-sm
                                   transition-all duration-700 group-hover:w-full rounded-full delay-75"></span>
                        </a>
                    </h3>

                    <!-- Enhanced Product Description -->
                    <div class="mt-3 relative">
                        <div class="flex items-start space-x-1.5">
                            <p class="text-gray-600 text-sm h-10 line-clamp-2 group-hover:text-gray-800 transition-colors duration-300 bg-gradient-to-r from-gray-700 via-gray-600 to-gray-700 bg-clip-text group-hover:text-transparent overflow-hidden">
                                {{ product.description|default:"High-quality component with excellent performance and reliability"|truncatechars:100 }}
                            </p>
                        </div>
                        <div class="absolute -bottom-1 left-0 w-full h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent opacity-70"></div>
                    </div>

                    <!-- Enhanced Price Section with Premium Design -->
                    <div class="mt-4 mb-3">
                        <div class="flex items-baseline justify-between">
                            <!-- Price display with improved gradient and animation -->
                            <div class="group">
                                <div class="flex items-center">
                                    <span class="text-xl font-bold bg-gradient-to-r from-blue-700 via-indigo-600 to-purple-700 bg-clip-text text-transparent group-hover:scale-105 transition-transform duration-300">
                                        ৳{{ product.price|floatformat:0|intcomma }}
                                    </span>

                                    {% if product.regular_price and product.price < product.regular_price %}
                                    <span class="relative ml-2.5">
                                        <span class="text-sm text-gray-400 line-through">৳{{ product.regular_price|floatformat:0|intcomma }}</span>
                                        <span class="absolute -top-3.5 -right-10 bg-red-100 text-red-600 text-xs font-bold px-1.5 py-0.5 rounded-md transform rotate-2 animate-pulse-subtle shadow-sm">
                                            SAVE {{ product.discount_percentage|default:0|floatformat:0 }}%
                                        </span>
                                    </span>
                                    {% endif %}
                                </div>

                                <!-- Animated underline effect on hover -->
                                <div class="h-0.5 w-0 bg-gradient-to-r from-blue-500 to-purple-500 group-hover:w-3/4 transition-all duration-300 rounded-full mt-1 opacity-70"></div>
                            </div>

                            <!-- Stock indicator with improved visuals -->
                            {% if product.stock > 0 %}
                            <div class="flex items-center bg-green-50 px-2 py-1 rounded-lg border border-green-100 shadow-sm group hover:bg-green-100 transition-all duration-300">
                                <span class="flex items-center text-xs text-green-700 font-medium">
                                    <i class="lni lni-checkmark-circle mr-1 group-hover:scale-110 transition-transform duration-300"></i>
                                    <span class="inline-flex items-center">
                                        <span>In Stock</span>
                                        {% if product.stock < 10 %}
                                        <span class="ml-1 bg-yellow-100 text-yellow-700 text-[10px] px-1.5 rounded">Only {{ product.stock }} left</span>
                                        {% endif %}
                                    </span>
                                </span>
                            </div>
                            {% else %}
                            <div class="flex items-center bg-red-50 px-2 py-1 rounded-lg border border-red-100 shadow-sm">
                                <span class="flex items-center text-xs text-red-600 font-medium">
                                    <i class="lni lni-close-circle mr-1 animate-pulse"></i> Out of Stock
                                </span>
                            </div>
                            {% endif %}
                        </div>

                        <!-- Additional product information -->
                        <div class="flex items-center justify-between mt-2 text-xs text-gray-500">
                            <span class="flex items-center">
                                <i class="lni lni-tag mr-1 text-gray-400"></i>
                                {{ product.category }}
                            </span>

                            {% if product.warranty %}
                            <span class="flex items-center">
                                <i class="lni lni-protection mr-1 text-gray-400"></i>
                                {{ product.warranty|default:"1 Year" }} Warranty
                            </span>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Action Buttons with Enhanced Visual Effects -->
                    <div class="flex gap-2 mt-4">
                        <!-- Add to Cart Button with Premium Design -->
                        <button
                            class="add-to-cart-btn flex-1 relative overflow-hidden group bg-gradient-to-br from-blue-600 via-primary to-indigo-600 text-white px-3 py-2 rounded-xl shadow-lg hover:shadow-2xl shadow-blue-600/30 hover:shadow-blue-800/40 flex items-center justify-center transform transition-all duration-500 hover:-translate-y-1 h-11 border border-blue-400/30"
                            data-product-id="{{ product.id }}"
                            data-product-category="{{ product.category }}">
                            <!-- Animated shine effect -->
                            <span class="absolute inset-0 w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-700 group-hover:animate-shine"></span>
                            <!-- Button content with improved icon animation -->
                            <span class="flex items-center justify-center relative z-10">
                                <i class="lni lni-cart text-lg mr-2 group-hover:animate-bounce-subtle"></i>
                                <span class="font-medium tracking-wide text-sm">Add to Cart</span>
                            </span>
                            <!-- Decorative glowing elements -->
                            <span class="absolute -right-12 -bottom-8 w-24 h-24 rounded-full bg-white/10 blur-md transform rotate-45 group-hover:scale-150 transition-transform duration-700"></span>
                            <span class="absolute -left-4 -top-4 w-16 h-16 rounded-full bg-blue-400/20 blur-md opacity-0 group-hover:opacity-100 transition-all duration-700 delay-100"></span>
                        </button>

                        <!-- Quick Actions with Elegant Microinteractions -->
                        <div class="flex gap-1.5">
                            <!-- Add to Wishlist Button with Enhanced Hover Effects -->
                            <button
                                class="add-to-wishlist-btn relative bg-white border border-red-200 hover:bg-red-50/80 hover:border-red-200 text-red-600 hover:text-red-600 h-11 w-11 rounded-xl transition-all duration-300 flex items-center justify-center shadow-sm hover:shadow-md transform hover:-translate-y-1 overflow-hidden group"
                                data-product-id="{{ product.id }}"
                                data-product-category="{{ product.category }}"
                                aria-label="Add to Wishlist">
                                <!-- Gradient background on hover -->
                                <span class="absolute inset-0 bg-gradient-to-br from-red-100 via-pink-50 to-red-100 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
                                <!-- Animated shine effect -->
                                <span class="absolute -inset-full h-1/3 w-1/2 top-0 bg-red-200/40 blur-lg transform -skew-x-12 -translate-x-full group-hover:translate-x-[250%] transition-transform duration-1000 ease-in-out"></span>
                                <!-- Heartbeat animation for icon -->
                                <i class="lni lni-heart text-lg relative z-10 transition-all duration-300 group-hover:scale-125 group-hover:text-red-600 group-hover:animate-heartbeat"></i>
                                <!-- Subtle tooltip on hover -->
                                <span class="absolute -bottom-8 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none whitespace-nowrap">Wishlist</span>
                            </button>

                            <!-- Add to Compare Button with Enhanced Hover Effects -->
                            <button
                                class="add-to-compare-btn relative bg-white border border-indigo-200 hover:bg-indigo-50/80 hover:border-indigo-200 text-indigo-600 hover:text-indigo-600 h-11 w-11 rounded-xl transition-all duration-300 flex items-center justify-center shadow-sm hover:shadow-md transform hover:-translate-y-1 overflow-hidden group"
                                data-product-id="{{ product.id }}"
                                data-product-category="{{ product.category }}"
                                aria-label="Add to Compare">
                                <!-- Gradient background on hover -->
                                <span class="absolute inset-0 bg-gradient-to-br from-indigo-100 via-purple-50 to-indigo-100 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
                                <!-- Animated shine effect -->
                                <span class="absolute -inset-full h-1/3 w-1/2 top-0 bg-indigo-200/40 blur-lg transform -skew-x-12 -translate-x-full group-hover:translate-x-[250%] transition-transform duration-1000 ease-in-out"></span>
                                <!-- Rotating animation for icon -->
                                <i class="lni lni-shuffle text-lg relative z-10 transition-all duration-300 group-hover:scale-125 group-hover:text-indigo-600 group-hover:rotate-180"></i>
                                <!-- Subtle tooltip on hover -->
                                <span class="absolute -bottom-8 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none whitespace-nowrap">Compare</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            {% empty %}
            <!-- No Products Found -->
            <div class="col-span-full flex flex-col items-center justify-center py-16 px-4">
                <!-- Enhanced empty state illustration with layered animation -->
                <div class="relative mb-8 group">
                    <!-- Multiple animated background blobs for depth -->
                    <div class="absolute inset-0 bg-blue-400/20 rounded-full blur-2xl opacity-60 group-hover:opacity-80 transition-all duration-700 animate-pulse" style="animation-duration: 3s;"></div>
                    <div class="absolute inset-0 -translate-x-4 translate-y-2 bg-purple-400/20 rounded-full blur-2xl opacity-60 group-hover:opacity-80 transition-all duration-700 animate-pulse" style="animation-duration: 4s; animation-delay: 1s;"></div>
                    <div class="absolute inset-0 translate-x-4 -translate-y-2 bg-yellow-400/20 rounded-full blur-2xl opacity-60 group-hover:opacity-80 transition-all duration-700 animate-pulse" style="animation-duration: 5s; animation-delay: 0.5s;"></div>

                    <!-- Main icon container with improved depth -->
                    <div class="bg-gradient-to-br from-white to-gray-100 p-10 rounded-full relative z-10 shadow-xl group-hover:shadow-2xl transition-all duration-500 transform group-hover:scale-110 border border-gray-100">
                        <i class="lni lni-search-alt text-6xl bg-gradient-to-br from-primary via-blue-500 to-indigo-600 bg-clip-text text-transparent group-hover:scale-110 transition-all duration-500"></i>
                    </div>

                    <!-- Orbital animation elements -->
                    <div class="absolute -top-4 -right-4 w-8 h-8 bg-blue-500/80 rounded-full blur-sm animate-orbit opacity-70"></div>
                    <div class="absolute -bottom-2 -left-2 w-6 h-6 bg-purple-500/80 rounded-full blur-sm animate-orbit opacity-70" style="animation-delay: 1s; animation-duration: 12s;"></div>
                    <div class="absolute top-1/2 right-1/4 w-4 h-4 bg-yellow-500/80 rounded-full blur-sm animate-orbit opacity-70" style="animation-delay: 0.5s; animation-duration: 8s;"></div>
                </div>

                <!-- Animated heading with enhanced gradient -->
                <h3 class="text-2xl md:text-3xl lg:text-4xl font-bold mb-3 bg-gradient-to-r from-gray-800 via-primary/80 to-gray-800 bg-clip-text text-transparent animate-gradient-x">
                    No Products Found
                </h3>

                <!-- Improved divider with double line effect -->
                <div class="relative h-2 w-36 my-4">
                    <div class="absolute inset-0 bg-gradient-to-r from-transparent via-primary/60 to-transparent rounded-full animate-pulse"></div>
                    <div class="absolute inset-0 top-1.5 bg-gradient-to-r from-transparent via-secondary/40 to-transparent rounded-full animate-pulse" style="animation-delay: 0.5s;"></div>
                </div>

                <!-- Enhanced description with better typography -->
                <p class="text-gray-600 text-center max-w-lg mb-8 leading-relaxed text-lg">
                    We couldn't find any products matching your criteria. Try adjusting your
                    <span class="relative inline-block px-2">
                        <span class="absolute inset-0 bg-blue-100 rounded-lg -rotate-1"></span>
                        <span class="relative text-primary font-medium">filters</span>
                    </span>
                    or explore our
                    <span class="relative inline-block px-2">
                        <span class="absolute inset-0 bg-purple-100 rounded-lg rotate-1"></span>
                        <span class="relative text-purple-700 font-medium">other categories</span>
                    </span>.
                </p>

                <!-- Action buttons with improved design and micro-interactions -->
                <div class="flex flex-wrap gap-5 justify-center">
                    <a href="{% url 'product-list' %}"
                       class="group relative overflow-hidden bg-gradient-to-r from-primary to-blue-600 text-white px-6 py-3 rounded-xl shadow-lg hover:shadow-xl shadow-primary/20 hover:shadow-primary/40 transform transition-all duration-300 hover:-translate-y-1 flex items-center gap-2.5">
                        <!-- Animated background shine effect -->
                        <span class="absolute inset-0 w-1/3 h-full bg-white/20 skew-x-12 -translate-x-full group-hover:translate-x-[250%] transition-transform duration-1000 ease-in-out"></span>
                        <i class="lni lni-reload text-lg group-hover:rotate-180 transition-transform duration-500"></i>
                        <span class="font-medium tracking-wide">Clear All Filters</span>
                    </a>

                    <button onclick="history.back()"
                            class="group relative overflow-hidden bg-white border border-gray-200 text-gray-700 hover:text-primary px-6 py-3 rounded-xl shadow-md hover:shadow-lg hover:border-primary/20 transform transition-all duration-300 hover:-translate-y-1 flex items-center gap-2.5">
                        <i class="lni lni-arrow-left text-lg group-hover:animate-bounce-x transition-transform duration-300"></i>
                        <span class="font-medium tracking-wide">Go Back</span>
                        <!-- Bottom border animation on hover -->
                        <span class="absolute bottom-0 left-1/2 -translate-x-1/2 h-0.5 w-0 group-hover:w-4/5 bg-gradient-to-r from-primary to-blue-500 transition-all duration-300"></span>
                    </button>
                </div>

                <!-- Additional helpful suggestions -->
                <div class="mt-10 text-sm text-gray-500 flex items-center">
                    <i class="lni lni-bulb text-yellow-500 mr-2"></i>
                    <span>Try searching for a specific product or browsing all categories</span>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Premium Pagination with Advanced UI & Visual Effects -->
        <div class="flex justify-center mt-20">
            {% if products.paginator.num_pages > 1 %}
            <div class="flex flex-col items-center gap-5">
                <!-- Pagination controls with glassmorphism effect -->
                <div class="flex items-center gap-2.5 p-2.5 bg-white/90 backdrop-blur-xl rounded-2xl shadow-xl border border-gray-100/90 hover:shadow-blue-100/30 transition-all duration-500 relative overflow-hidden">
                    <!-- Subtle background animation -->
                    <div class="absolute inset-0 overflow-hidden opacity-10 pointer-events-none">
                        <div class="absolute top-0 -right-10 w-32 h-32 bg-blue-400 rounded-full filter blur-2xl animate-pulse"></div>
                        <div class="absolute bottom-0 -left-10 w-24 h-24 bg-purple-400 rounded-full filter blur-xl animate-pulse" style="animation-delay: 1s;"></div>
                    </div>

                    <!-- Previous page button with enhanced hover animation -->
                    {% if products.has_previous %}
                    <a href="?page={{ products.previous_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}{% if sort_by %}&sort_by={{ sort_by }}{% endif %}{% if current_category %}&category={{ current_category }}{% endif %}"
                       class="relative group overflow-hidden w-12 h-12 flex items-center justify-center rounded-xl bg-white hover:bg-gradient-to-br hover:from-blue-500 hover:to-primary shadow-md hover:shadow-lg hover:shadow-blue-300/30 transition-all duration-300 transform hover:-translate-y-1"
                       aria-label="Previous page">
                        <i class="lni lni-chevron-left text-gray-600 group-hover:text-white transition-colors duration-300 group-hover:scale-110 transform"></i>
                        <span class="absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-primary scale-x-0 group-hover:scale-x-100 transition-transform duration-500 ease-out"></span>
                        <span class="absolute inset-0 w-full h-full bg-gradient-to-br from-white/10 via-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
                    </a>
                    {% else %}
                    <button class="w-12 h-12 flex items-center justify-center rounded-xl bg-gray-100/80 text-gray-400 cursor-not-allowed relative overflow-hidden" disabled aria-label="Previous page unavailable">
                        <i class="lni lni-chevron-left"></i>
                        <span class="absolute inset-0 border border-gray-200/50 rounded-xl"></span>
                    </button>
                    {% endif %}

                    <!-- Page numbers with enhanced interactive elements -->
                    <div class="flex items-center gap-2 px-2">
                        {% if products.number > 3 %}
                        <a href="?page=1{% if search_query %}&search={{ search_query }}{% endif %}{% if sort_by %}&sort_by={{ sort_by }}{% endif %}{% if current_category %}&category={{ current_category }}{% endif %}"
                           class="group relative w-11 h-11 flex items-center justify-center rounded-xl bg-white hover:bg-blue-50 text-gray-700 font-medium transition-all duration-300 shadow-md hover:shadow-lg hover:text-primary"
                           aria-label="First page">
                           <span class="relative z-10 group-hover:scale-110 transform transition-transform duration-300">1</span>
                           <span class="absolute inset-0 border border-transparent group-hover:border-primary/20 rounded-xl transition-all duration-300"></span>
                        </a>
                        {% if products.number > 4 %}
                        <span class="text-gray-500 flex items-center justify-center w-8 group relative">
                            <span class="group-hover:opacity-0 transition-opacity duration-300"><i class="lni lni-more-alt text-xs"></i></span>
                            <span class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-primary font-bold">...</span>
                        </span>
                        {% endif %}
                        {% endif %}

                        {% for i in products.paginator.page_range %}
                            {% if i > products.number|add:'-3' and i < products.number|add:'3' %}
                                {% if products.number == i %}
                                <span class="relative w-11 h-11 flex items-center justify-center rounded-xl bg-gradient-to-br from-blue-500 to-primary text-white font-bold shadow-lg shadow-blue-500/20">
                                    <span class="relative z-10 animate-pulse-subtle">{{ i }}</span>
                                    <!-- Animated ring effect for current page -->
                                    <span class="absolute inset-0 rounded-xl ring-2 ring-white/30 animate-ping-slow opacity-70"></span>
                                    <!-- Decorative dots -->
                                    <span class="absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-1.5 h-1.5 bg-white rounded-full"></span>
                                    <span class="absolute -bottom-1 left-1/2 transform -translate-x-1/2 translate-x-3 w-1 h-1 bg-white/70 rounded-full"></span>
                                    <span class="absolute -bottom-1 left-1/2 transform -translate-x-1/2 -translate-x-3 w-1 h-1 bg-white/70 rounded-full"></span>
                                </span>
                                {% else %}
                                <a href="?page={{ i }}{% if search_query %}&search={{ search_query }}{% endif %}{% if sort_by %}&sort_by={{ sort_by }}{% endif %}{% if current_category %}&category={{ current_category }}{% endif %}"
                                   class="group relative w-11 h-11 flex items-center justify-center rounded-xl bg-white hover:bg-gradient-to-br hover:from-blue-50 hover:to-indigo-50 font-medium transition-all duration-300 shadow-md hover:shadow-lg hover:text-primary border border-transparent hover:border-blue-100/50"
                                   aria-label="Page {{ i }}">
                                   <span class="relative z-10 group-hover:scale-110 transform transition-transform duration-300">{{ i }}</span>
                                   <span class="absolute bottom-0 left-1/2 transform -translate-x-1/2 w-0 group-hover:w-6 h-0.5 bg-primary/70 transition-all duration-300 rounded-full opacity-0 group-hover:opacity-100"></span>
                                </a>
                                {% endif %}
                            {% endif %}
                        {% endfor %}

                        {% if products.number < products.paginator.num_pages|add:'-2' %}
                        {% if products.number < products.paginator.num_pages|add:'-3' %}
                        <span class="text-gray-500 flex items-center justify-center w-8 group relative">
                            <span class="group-hover:opacity-0 transition-opacity duration-300"><i class="lni lni-more-alt text-xs"></i></span>
                            <span class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-primary font-bold">...</span>
                        </span>
                        {% endif %}
                        <a href="?page={{ products.paginator.num_pages }}{% if search_query %}&search={{ search_query }}{% endif %}{% if sort_by %}&sort_by={{ sort_by }}{% endif %}{% if current_category %}&category={{ current_category }}{% endif %}"
                           class="group relative w-11 h-11 flex items-center justify-center rounded-xl bg-white hover:bg-blue-50 text-gray-700 font-medium transition-all duration-300 shadow-md hover:shadow-lg hover:text-primary"
                           aria-label="Last page">
                           <span class="relative z-10 group-hover:scale-110 transform transition-transform duration-300">{{ products.paginator.num_pages }}</span>
                           <span class="absolute inset-0 border border-transparent group-hover:border-primary/20 rounded-xl transition-all duration-300"></span>
                        </a>
                        {% endif %}
                    </div>

                    <!-- Next page button with enhanced hover animation -->
                    {% if products.has_next %}
                    <a href="?page={{ products.next_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}{% if sort_by %}&sort_by={{ sort_by }}{% endif %}{% if current_category %}&category={{ current_category }}{% endif %}"
                       class="relative group overflow-hidden w-12 h-12 flex items-center justify-center rounded-xl bg-white hover:bg-gradient-to-br hover:from-primary hover:to-blue-500 shadow-md hover:shadow-lg hover:shadow-blue-300/30 transition-all duration-300 transform hover:-translate-y-1"
                       aria-label="Next page">
                        <i class="lni lni-chevron-right text-gray-600 group-hover:text-white transition-colors duration-300 group-hover:scale-110 transform"></i>
                        <span class="absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-primary scale-x-0 group-hover:scale-x-100 transition-transform duration-500 ease-out"></span>
                        <span class="absolute inset-0 w-full h-full bg-gradient-to-br from-white/10 via-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
                    </a>
                    {% else %}
                    <button class="w-12 h-12 flex items-center justify-center rounded-xl bg-gray-100/80 text-gray-400 cursor-not-allowed relative overflow-hidden" disabled aria-label="Next page unavailable">
                        <i class="lni lni-chevron-right"></i>
                        <span class="absolute inset-0 border border-gray-200/50 rounded-xl"></span>
                    </button>
                    {% endif %}
                </div>

                <!-- Enhanced page info with modern design -->
                <div class="flex items-center gap-3">
                    <!-- Current page indicator -->
                    <div class="flex items-center gap-1.5 text-sm bg-gradient-to-r from-blue-50 to-indigo-50 px-4 py-2 rounded-xl shadow-md border border-blue-100/50 group hover:shadow-lg hover:from-blue-100 hover:to-indigo-100 transition-all duration-300 transform hover:-translate-y-0.5">
                        <i class="lni lni-bookmark text-primary text-sm group-hover:scale-110 transform transition-transform duration-300"></i>
                        <span class="font-medium text-primary">{{ products.number }}</span>
                        <span class="text-gray-600">of</span>
                        <span class="font-medium text-gray-800">{{ products.paginator.num_pages }}</span>
                        <span class="text-gray-500 text-xs">pages</span>
                    </div>

                    <!-- Total items counter with hover effect -->
                    <div class="relative overflow-hidden group">
                        <div class="flex items-center gap-1.5 text-xs text-gray-600 bg-gray-100/80 hover:bg-white px-3 py-2 rounded-xl border border-gray-200/50 shadow-sm group-hover:shadow-md transition-all duration-300 transform group-hover:-translate-y-0.5">
                            <i class="lni lni-grid-alt text-primary/70 group-hover:text-primary transition-colors duration-300"></i>
                            <span class="relative z-10 group-hover:font-medium transition-all duration-300">{{ products.paginator.count }}</span>
                            <span class="relative z-10">items found</span>
                            <span class="absolute bottom-0 left-0 h-0.5 w-0 group-hover:w-full bg-gradient-to-r from-primary/40 to-blue-400/40 transition-all duration-500 rounded-full"></span>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</section>

<!-- Add to Compare and Add to Cart Functionality -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Add to Compare functionality
        const addToCompareButtons = document.querySelectorAll('.add-to-compare-btn');
        addToCompareButtons.forEach(button => {
            button.addEventListener('click', function() {
                const productId = this.getAttribute('data-product-id');
                const productCategory = this.getAttribute('data-product-category');

                // Create form data
                const formData = new FormData();
                formData.append('product_id', productId);
                formData.append('product_category', productCategory);
                formData.append('csrfmiddlewaretoken', '{{ csrf_token }}');

                // Send AJAX request to add to compare
                fetch('{% url "add_to_compare" %}', {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'X-Requested-With': 'XMLHttpRequest'
                    }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'success') {
                        // Show success message
                        const toast = document.createElement('div');
                        toast.className = 'fixed bottom-4 right-4 bg-secondary text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center';
                        toast.innerHTML = `
                            <i class="lni lni-checkmark-circle text-xl mr-2"></i>
                            <div>
                                ${data.message}
                            </div>
                        `;
                        document.body.appendChild(toast);

                        // Remove toast after 4 seconds
                        setTimeout(() => {
                            toast.remove();
                        }, 4000);

                        // Update compare count in the header
                        const compareCountElements = document.querySelectorAll('.compare-count');
                        compareCountElements.forEach(element => {
                            element.textContent = data.compare_count;
                        });
                    } else {
                        // Show error message
                        const toast = document.createElement('div');
                        toast.className = 'fixed bottom-4 right-4 bg-red-600 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center';
                        toast.innerHTML = `
                            <i class="lni lni-warning text-xl mr-2"></i>
                            <div>
                                ${data.message}
                            </div>
                        `;
                        document.body.appendChild(toast);

                        // Remove toast after 4 seconds
                        setTimeout(() => {
                            toast.remove();
                        }, 4000);
                    }
                })
                .catch(error => {
                    console.error('Error adding to compare:', error);
                    alert('An error occurred while adding the product to your compare list.');
                });
            });
        });

        // Add to Cart functionality
        const addToCartButtons = document.querySelectorAll('.add-to-cart-btn');
        addToCartButtons.forEach(button => {
            button.addEventListener('click', function() {
                const productId = this.getAttribute('data-product-id');
                const productCategory = this.getAttribute('data-product-category');

                // Create form data
                const formData = new FormData();
                formData.append('product_id', productId);
                formData.append('product_category', productCategory);
                formData.append('quantity', 1);
                formData.append('csrfmiddlewaretoken', '{{ csrf_token }}');

                // Send AJAX request to add to cart
                fetch('{% url "add_to_cart" %}', {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'X-Requested-With': 'XMLHttpRequest'
                    }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'success') {
                        // Show success message
                        const toast = document.createElement('div');
                        toast.className = 'fixed bottom-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center';
                        toast.innerHTML = `
                            <i class="lni lni-checkmark-circle text-xl mr-2"></i>
                            <div>
                                ${data.message}
                            </div>
                        `;
                        document.body.appendChild(toast);

                        // Remove toast after 4 seconds
                        setTimeout(() => {
                            toast.remove();
                        }, 4000);                        // Update cart count in the header
                        const cartCountElements = document.querySelectorAll('.cart-count');
                        cartCountElements.forEach(element => {
                            element.textContent = data.cart_count;
                        });

                        // Update cart subtotal in the header
                        const cartSubtotalElement = document.getElementById('cart-subtotal-header');
                        if (cartSubtotalElement && data.cart_subtotal !== undefined) {
                            cartSubtotalElement.textContent = data.cart_subtotal.toLocaleString();
                        }
                    } else {
                        // Show error message
                        const toast = document.createElement('div');
                        toast.className = 'fixed bottom-4 right-4 bg-red-600 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center';
                        toast.innerHTML = `
                            <i class="lni lni-warning text-xl mr-2"></i>
                            <div>
                                ${data.message}
                            </div>
                        `;
                        document.body.appendChild(toast);

                        // Remove toast after 4 seconds
                        setTimeout(() => {
                            toast.remove();
                        }, 4000);
                    }
                })
                .catch(error => {
                    console.error('Error adding to cart:', error);
                    alert('An error occurred while adding the product to your cart.');
                });
            });
        });

        // Add to Wishlist functionality
        const addToWishlistButtons = document.querySelectorAll('.add-to-wishlist-btn');
        addToWishlistButtons.forEach(button => {
            button.addEventListener('click', function() {
                const productId = this.getAttribute('data-product-id');
                const productCategory = this.getAttribute('data-product-category');

                // Create form data
                const formData = new FormData();
                formData.append('product_id', productId);
                formData.append('product_category', productCategory);
                formData.append('csrfmiddlewaretoken', '{{ csrf_token }}');

                // Send AJAX request to add to wishlist
                fetch('{% url "add_to_wishlist" %}', {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'X-Requested-With': 'XMLHttpRequest'
                    }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'success') {
                        // Show success message
                        const toast = document.createElement('div');
                        toast.className = 'fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center';
                        toast.innerHTML = `
                            <i class="lni lni-heart text-xl mr-2"></i>
                            <div>
                                <p class="font-medium">${data.message}</p>
                                <a href="{% url 'view_wishlist' %}" class="text-sm underline">View Wishlist</a>
                            </div>
                        `;
                        document.body.appendChild(toast);

                        // Remove toast after 4 seconds
                        setTimeout(() => {
                            toast.remove();
                        }, 4000);

                        // Update wishlist count in the header
                        const wishlistCountElements = document.querySelectorAll('.wishlist-count');
                        wishlistCountElements.forEach(element => {
                            element.textContent = data.wishlist_count;
                        });
                    } else {
                        // Show info message if already in wishlist
                        const toast = document.createElement('div');
                        toast.className = 'fixed bottom-4 right-4 bg-blue-600 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center';
                        toast.innerHTML = `
                            <i class="lni lni-information-circle text-xl mr-2"></i>
                            <div>
                                <p class="font-medium">${data.message}</p>
                                <a href="{% url 'view_wishlist' %}" class="text-sm underline">View Wishlist</a>
                            </div>
                        `;
                        document.body.appendChild(toast);

                        // Remove toast after 4 seconds
                        setTimeout(() => {
                            toast.remove();
                        }, 4000);
                    }
                })
                .catch(error => {
                    console.error('Error adding to wishlist:', error);
                    alert('An error occurred while adding the product to your wishlist.');
                });
            });
        });
    });
</script>
{% endblock content %}