{% extends 'base.html' %}
{% load static %}
{% load humanize %}

{% block title %}Blog | TechReform BD{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <!-- Blog Header with Enhanced Animation & Design -->
    <div
        class="text-center mb-16 relative overflow-visible"
        x-data="{ show: false }"
        x-init="setTimeout(() => show = true, 100)"
    >
        <!-- Animated Gradient Border -->
        <div class="absolute inset-0 flex justify-center items-center pointer-events-none z-0">
            <div class="w-72 h-72 md:w-96 md:h-96 rounded-full bg-gradient-to-tr from-primary via-secondary to-accent opacity-30 blur-3xl animate-gradient-spin"></div>
        </div>
        <!-- Main Heading with Animated Gradient and Shadow -->
        <div
            x-show="show"
            x-transition:enter="transition-all duration-700 ease-out"
            x-transition:enter-start="opacity-0 -translate-y-10 scale-90"
            x-transition:enter-end="opacity-100 translate-y-0 scale-100"
            class="relative z-10 inline-block"
        >
            <h1 class="text-5xl md:text-6xl font-extrabold mb-4 bg-gradient-to-r from-primary via-secondary to-accent bg-clip-text text-transparent drop-shadow-2xl animate-gradient-x">
                <span class="inline-flex items-center gap-3">
                    <i class="lni lni-bulb text-accent animate-bounce-slow"></i>
                    TechReform Blog
                    <i class="lni lni-rocket text-primary animate-bounce-slow-rev"></i>
                </span>
            </h1>
        </div>
        <!-- Subtitle with Fade-in Animation -->
        <div
            x-show="show"
            x-transition:enter="transition-all duration-1000 delay-200 ease-out"
            x-transition:enter-start="opacity-0 translate-y-8"
            x-transition:enter-end="opacity-100 translate-y-0"
            class="max-w-2xl mx-auto relative z-10"
        >
            <p class="text-xl md:text-2xl text-base-content/80 px-2 md:px-0 mb-4 font-medium animate-fade-in">
                Stay updated with the latest <span class="text-primary font-bold">tech news</span>, product reviews, and insights from our <span class="text-secondary font-bold">experts</span>.
            </p>
            <div class="flex justify-center mt-4">
                <span class="inline-flex items-center gap-2 px-6 py-2 rounded-full bg-gradient-to-r from-primary/20 to-secondary/20 text-primary font-semibold shadow-lg animate-float">
                    <i class="lni lni-bolt text-2xl animate-pulse-fast"></i>
                    Fresh Content Weekly!
                </span>
            </div>
        </div>
        <!-- Decorative Animated Circles and Sparkles -->
        <span class="absolute -top-10 left-1/4 w-24 h-24 bg-primary/30 rounded-full blur-2xl animate-pulse-slow z-0"></span>
        <span class="absolute -bottom-12 right-1/3 w-32 h-32 bg-secondary/30 rounded-full blur-3xl animate-pulse-slow z-0"></span>
        <span class="absolute top-8 right-1/4 w-8 h-8 bg-accent/40 rounded-full blur-md animate-sparkle"></span>
        <span class="absolute bottom-8 left-1/5 w-6 h-6 bg-primary/40 rounded-full blur-md animate-sparkle-rev"></span>
    </div>
    <style>
        @keyframes gradient-x {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        .animate-gradient-x {
            background-size: 200% 200%;
            animation: gradient-x 4s ease-in-out infinite;
        }
        @keyframes gradient-spin {
            0% { transform: rotate(0deg);}
            100% { transform: rotate(360deg);}
        }
        .animate-gradient-spin {
            animation: gradient-spin 18s linear infinite;
        }
        @keyframes pulse-slow {
            0%, 100% { opacity: 0.5; transform: scale(1);}
            50% { opacity: 1; transform: scale(1.1);}
        }
        .animate-pulse-slow {
            animation: pulse-slow 5s cubic-bezier(0.4,0,0.2,1) infinite;
        }
        @keyframes pulse-fast {
            0%, 100% { opacity: 0.7; transform: scale(1);}
            50% { opacity: 1; transform: scale(1.15);}
        }
        .animate-pulse-fast {
            animation: pulse-fast 1.2s cubic-bezier(0.4,0,0.2,1) infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px);}
            50% { transform: translateY(-10px);}
        }
        .animate-float {
            animation: float 4s ease-in-out infinite;
        }
        @keyframes bounce-slow {
            0%, 100% { transform: translateY(0);}
            50% { transform: translateY(-12px);}
        }
        .animate-bounce-slow {
            animation: bounce-slow 3s infinite;
        }
        @keyframes bounce-slow-rev {
            0%, 100% { transform: translateY(0);}
            50% { transform: translateY(12px);}
        }
        .animate-bounce-slow-rev {
            animation: bounce-slow-rev 3s infinite;
        }
        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .animate-fade-in {
            animation: fade-in 1.2s ease-in;
        }
        @keyframes sparkle {
            0%, 100% { opacity: 0.7; transform: scale(1) rotate(0deg);}
            50% { opacity: 1; transform: scale(1.3) rotate(20deg);}
        }
        .animate-sparkle {
            animation: sparkle 2.5s ease-in-out infinite;
        }
        @keyframes sparkle-rev {
            0%, 100% { opacity: 0.7; transform: scale(1) rotate(0deg);}
            50% { opacity: 1; transform: scale(1.2) rotate(-20deg);}
        }
        .animate-sparkle-rev {
            animation: sparkle-rev 2.5s ease-in-out infinite;
        }
    </style>

    <!-- Featured Posts Section -->
    {% if featured_posts %}
    <div
        class="mb-16"
        x-data="{ show: false }"
        x-init="setTimeout(() => show = true, 200)"
    >
        <h2
            class="text-2xl font-bold mb-8 flex items-center justify-center gap-2 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent drop-shadow-lg"
            x-show="show"
            x-transition:enter="transition-all duration-700 ease-out"
            x-transition:enter-start="opacity-0 -translate-y-6 scale-95"
            x-transition:enter-end="opacity-100 translate-y-0 scale-100"
        >
            <i class="lni lni-star-filled text-primary animate-spin-slow"></i>
            Featured Articles
        </h2>

        <div class="relative">
            <!-- Decorative Animated Circles -->
            <span class="absolute -top-8 -left-8 w-24 h-24 bg-primary/20 rounded-full blur-2xl animate-pulse-slow"></span>
            <span class="absolute -bottom-8 -right-8 w-20 h-20 bg-secondary/20 rounded-full blur-xl animate-pulse-slow"></span>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 relative z-10">
                {% for post in featured_posts %}
                <div
                    class="group card bg-base-100 shadow-xl overflow-hidden h-full transition-all duration-300 hover:shadow-2xl hover:scale-[1.03] border border-primary/10"
                    x-show="show"
                    x-transition:enter="transition-all duration-700 delay-{{ forloop.counter0|add:'1' }}00 ease-out"
                    x-transition:enter-start="opacity-0 translate-y-8 scale-95"
                    x-transition:enter-end="opacity-100 translate-y-0 scale-100"
                    style="animation-delay: {{ forloop.counter0|add:'1' }}00ms;"
                >
                    {% if post.featured_image %}
                    <figure class="relative h-48 overflow-hidden">
                        <img src="{{ post.featured_image.url }}" alt="{{ post.title }}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                        <span class="absolute top-3 left-3 bg-primary text-white text-xs px-3 py-1 rounded-full shadow animate-float">Featured</span>
                    </figure>
                    {% else %}
                    <figure class="relative h-48 overflow-hidden bg-gradient-to-r from-primary/20 to-secondary/20 flex items-center justify-center">
                        <i class="lni lni-text-format text-6xl text-primary/30"></i>
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                        <span class="absolute top-3 left-3 bg-primary text-white text-xs px-3 py-1 rounded-full shadow animate-float">Featured</span>
                    </figure>
                    {% endif %}

                    <div class="card-body flex flex-col">
                        <div class="flex items-center mb-2 text-sm">
                            <span class="badge badge-primary/80">{{ post.category.name }}</span>
                            <span class="mx-2 text-base-content/40">•</span>
                            <span class="text-base-content/60">{{ post.published_at|date:"M d, Y" }}</span>
                        </div>

                        <h3 class="card-title font-bold hover:text-primary transition-colors text-lg mb-2">
                            <a href="{% url 'blog:post_detail' post.slug %}" class="transition-all duration-200 group-hover:underline group-hover:text-secondary">{{ post.title }}</a>
                        </h3>

                        <p class="line-clamp-3 text-base-content/70 mb-4">{{ post.summary }}</p>

                        <div class="card-actions justify-between items-center mt-auto pt-2">
                            <div class="flex items-center text-sm gap-2 text-base-content/60">
                                <span class="flex items-center gap-1"><i class="lni lni-eye"></i>{{ post.view_count }}</span>
                                <span>•</span>
                                <span class="flex items-center gap-1"><i class="lni lni-comments-alt"></i>{{ post.comment_count }}</span>
                            </div>
                            <a href="{% url 'blog:post_detail' post.slug %}" class="btn btn-sm btn-outline btn-primary group-hover:scale-105 transition-transform duration-200">
                                Read More
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        <style>
            .animate-float {
                animation: float 5s ease-in-out infinite;
            }
            @keyframes float {
                0%, 100% { transform: translateY(0px);}
                50% { transform: translateY(-10px);}
            }
            .animate-spin-slow {
                animation: spin-slow 8s linear infinite;
            }
            @keyframes spin-slow {
                0% { transform: rotate(0deg);}
                100% { transform: rotate(360deg);}
            }
            .animate-pulse-slow {
                animation: pulse-slow 5s cubic-bezier(0.4,0,0.2,1) infinite;
            }
            @keyframes pulse-slow {
                0%, 100% { opacity: 0.5; transform: scale(1);}
                50% { opacity: 1; transform: scale(1.1);}
            }
        </style>
    </div>
    {% endif %}

    <!-- Main Content Area -->
    <div class="flex flex-col lg:flex-row gap-8">
        <!-- Posts Listing -->
        <div class="lg:w-3/4">
            <!-- Animated Section Heading for Latest Articles -->
            <div
                class="mb-8 text-center relative"
                x-data="{ show: false }"
                x-init="setTimeout(() => show = true, 300)"
            >
                <!-- Decorative Animated Gradient Circle -->
                <span class="absolute -top-6 left-1/2 -translate-x-1/2 w-24 h-24 bg-primary/20 rounded-full blur-2xl animate-pulse-slow z-0"></span>
                <h2
                    x-show="show"
                    x-transition:enter="transition-all duration-700 ease-out"
                    x-transition:enter-start="opacity-0 -translate-y-8 scale-90"
                    x-transition:enter-end="opacity-100 translate-y-0 scale-100"
                    class="inline-flex items-center gap-3 text-3xl md:text-4xl font-extrabold bg-gradient-to-r from-primary via-secondary to-accent bg-clip-text text-transparent drop-shadow-2xl animate-gradient-x relative z-10"
                >
                    <i class="lni lni-book text-accent animate-bounce-slow"></i>
                    Latest Articles
                    <svg class="w-7 h-7 text-primary animate-sparkle-rev" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/>
                    </svg>
                </h2>
                <p
                    x-show="show"
                    x-transition:enter="transition-all duration-1000 delay-200 ease-out"
                    x-transition:enter-start="opacity-0 translate-y-6"
                    x-transition:enter-end="opacity-100 translate-y-0"
                    class="mt-2 text-base md:text-lg text-base-content/70 font-medium animate-fade-in relative z-10"
                >
                    Discover our most recent posts, handpicked for you!
                </p>
            </div>
            <style>
                @keyframes gradient-x {
                    0%, 100% { background-position: 0% 50%; }
                    50% { background-position: 100% 50%; }
                }
                .animate-gradient-x {
                    background-size: 200% 200%;
                    animation: gradient-x 4s ease-in-out infinite;
                }
                @keyframes bounce-slow {
                    0%, 100% { transform: translateY(0);}
                    50% { transform: translateY(-10px);}
                }
                .animate-bounce-slow {
                    animation: bounce-slow 2.5s infinite;
                }
                @keyframes pulse-slow {
                    0%, 100% { opacity: 0.5; transform: scale(1);}
                    50% { opacity: 1; transform: scale(1.1);}
                }
                .animate-pulse-slow {
                    animation: pulse-slow 5s cubic-bezier(0.4,0,0.2,1) infinite;
                }
                @keyframes fade-in {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                .animate-fade-in {
                    animation: fade-in 1.2s ease-in;
                }
                @keyframes sparkle-rev {
                    0%, 100% { opacity: 0.7; transform: scale(1) rotate(0deg);}
                    50% { opacity: 1; transform: scale(1.2) rotate(-20deg);}
                }
                .animate-sparkle-rev {
                    animation: sparkle-rev 2.5s ease-in-out infinite;
                }
            </style>

            {% if page_obj %}
                <div class="grid grid-cols-1 md:grid-cols-2 gap-10 mb-12">
                    {% for post in page_obj %}
                    <div
                        class="group card bg-base-100 shadow-2xl border border-primary/10 overflow-hidden h-full transition-all duration-400 hover:shadow-3xl hover:scale-[1.035] relative rounded-2xl"
                        x-data="{ show: false }"
                        x-init="setTimeout(() => show = true, {{ forloop.counter0|add:'1' }}00)"
                        x-show="show"
                        x-transition:enter="transition-all duration-800 ease-out"
                        x-transition:enter-start="opacity-0 translate-y-10 scale-95"
                        x-transition:enter-end="opacity-100 translate-y-0 scale-100"
                        style="animation-delay: {{ forloop.counter0|add:'1' }}00ms;"
                    >
                        {% if post.featured_image %}
                        <figure class="relative h-52 overflow-hidden">
                            <img src="{{ post.featured_image.url }}" alt="{{ post.title }}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                            <span class="absolute top-3 left-3 bg-gradient-to-r from-secondary to-accent text-white text-xs px-3 py-1 rounded-full shadow animate-float font-semibold tracking-wide">New</span>
                        </figure>
                        {% else %}
                        <figure class="relative h-52 overflow-hidden bg-gradient-to-r from-primary/10 to-secondary/10 flex items-center justify-center">
                            <i class="lni lni-text-format text-6xl text-primary/30"></i>
                            <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                            <span class="absolute top-3 left-3 bg-gradient-to-r from-secondary to-accent text-white text-xs px-3 py-1 rounded-full shadow animate-float font-semibold tracking-wide">New</span>
                        </figure>
                        {% endif %}

                        <div class="card-body flex flex-col px-5 py-6">
                            <div class="flex items-center mb-3 text-xs gap-2">
                                <a href="{% url 'blog:category_posts' post.category.slug %}" class="inline-flex items-center gap-1 px-2 py-1 rounded-full bg-gradient-to-r from-white to-white text-primary font-semibold shadow-sm hover:scale-105 hover:from-primary hover:to-accent hover:text-white transition-all duration-200">
                                    <i class="lni lni-folder text-xs"></i>
                                    {{ post.category.name }}
                                </a>
                                <span class="mx-2 text-base-content/20">|</span>
                                <span class="flex items-center gap-1 text-base-content/60 bg-gradient-to-r from-primary/10 to-secondary/10 px-2 py-1 rounded-full shadow-sm">
                                    <i class="lni lni-calendar text-xs text-primary"></i>
                                    <span class="font-semibold">{{ post.published_at|date:"M d, Y" }}</span>
                                </span>
                            </div>

                            <h3 class="card-title text-2xl md:text-xl font-extrabold mb-2 leading-tight bg-gradient-to-r from-primary via-secondary to-accent bg-clip-text text-transparent transition-all duration-200 group-hover:text-accent group-hover:underline drop-shadow-lg">
                                <a href="{% url 'blog:post_detail' post.slug %}" class="transition-all duration-200 group-hover:text-secondary group-hover:underline">
                                    <span class="inline-flex items-center gap-2">
                                        <i class="lni lni-bulb text-primary animate-bounce-slow"></i>
                                        {{ post.title }}
                                    </span>
                                </a>
                            </h3>

                            <p class="line-clamp-3 text-base-content/80 text-[15px] mb-4 animate-fade-in leading-relaxed">
                                {{ post.summary|truncatechars:180 }}
                            </p>
                            <div class="flex items-center gap-2 mb-2">
                                {% for tag in post.tags.all|slice:":3" %}
                                    <a href="{% url 'blog:tag_posts' tag.slug %}" class="badge badge-sm badge-outline hover:bg-accent hover:text-white transition-colors">
                                        #{{ tag.name }}
                                    </a>
                                {% endfor %}
                            </div>

                            <div class="flex items-center justify-between mt-auto pt-4 border-t border-base-200/70">
                                <div class="flex items-center gap-5 text-xs font-medium text-base-content/70">
                                    <span class="flex items-center gap-1.5 px-2 py-1 rounded-full bg-primary/10 hover:bg-primary/20 transition-colors">
                                        <i class="lni lni-eye text-primary text-base"></i>
                                        <span class="font-semibold text-primary">{{ post.view_count|intcomma }}</span>
                                        <span class="ml-1 text-[11px] text-primary/70">Views</span>
                                    </span>
                                    <span class="text-base-content/20">•</span>
                                    <span class="flex items-center gap-1.5 px-2 py-1 rounded-full bg-secondary/10 hover:bg-secondary/20 transition-colors">
                                        <i class="lni lni-comments-alt text-secondary text-base"></i>
                                        <span class="font-semibold text-secondary">{{ post.comment_count|intcomma }}</span>
                                        <span class="ml-1 text-[11px] text-secondary/70">Comments</span>
                                    </span>
                                </div>
                                <a href="{% url 'blog:post_detail' post.slug %}"
                                   class="btn btn-xs bg-gradient-to-r from-primary via-secondary to-accent text-white font-extrabold shadow-xl rounded-full px-6 py-2 transition-all duration-200 hover:scale-110 hover:from-accent hover:via-primary hover:to-secondary hover:shadow-2xl group-hover:from-accent group-hover:to-primary flex items-center gap-2 ring-2 ring-primary/20 hover:ring-accent/40 focus:outline-none focus:ring-4 focus:ring-accent/40">
                                    <span class="tracking-wide uppercase">Read More</span>
                                    <i class="lni lni-arrow-right text-lg"></i>
                                </a>
                            </div>
                        </div>
                        <!-- Decorative Sparkle -->
                        <span class="absolute -top-4 -right-4 w-10 h-10 bg-accent/40 rounded-full blur-lg animate-sparkle"></span>
                        <span class="absolute bottom-4 left-4 w-6 h-6 bg-primary/30 rounded-full blur-md animate-sparkle-rev"></span>
                    </div>
                    {% endfor %}
                </div>
                <style>
                    @keyframes float {
                        0%, 100% { transform: translateY(0px);}
                        50% { transform: translateY(-12px);}
                    }
                    .animate-float {
                        animation: float 4s ease-in-out infinite;
                    }
                    @keyframes fade-in {
                        from { opacity: 0; }
                        to { opacity: 1; }
                    }
                    .animate-fade-in {
                        animation: fade-in 1.2s ease-in;
                    }
                    @keyframes sparkle {
                        0%, 100% { opacity: 0.7; transform: scale(1) rotate(0deg);}
                        50% { opacity: 1; transform: scale(1.25) rotate(-15deg);}
                    }
                    .animate-sparkle {
                        animation: sparkle 2.5s ease-in-out infinite;
                    }
                    @keyframes sparkle-rev {
                        0%, 100% { opacity: 0.7; transform: scale(1) rotate(0deg);}
                        50% { opacity: 1; transform: scale(1.15) rotate(15deg);}
                    }
                    .animate-sparkle-rev {
                        animation: sparkle-rev 2.5s ease-in-out infinite;
                    }
                    .btn-gradient-to-r {
                        background-image: linear-gradient(to right, var(--tw-gradient-stops));
                        border: none;
                    }
                </style>

                <!-- Pagination -->
                {% if page_obj.has_other_pages %}
                <div class="flex justify-center mt-12">
                    <nav
                        class="inline-flex items-center gap-2 bg-gradient-to-r from-primary/10 via-secondary/10 to-accent/10 px-6 py-3 rounded-full shadow-lg animate-fade-in"
                        x-data="{ show: false }"
                        x-init="setTimeout(() => show = true, 100)"
                        x-show="show"
                        x-transition:enter="transition-all duration-700 ease-out"
                        x-transition:enter-start="opacity-0 scale-90"
                        x-transition:enter-end="opacity-100 scale-100"
                        aria-label="Pagination"
                    >
                        {% if page_obj.has_previous %}
                            <a href="?page=1"
                               class="btn btn-sm btn-circle bg-gradient-to-br from-primary to-secondary text-white shadow-md hover:scale-110 transition-transform duration-200"
                               title="First Page">
                                <i class="lni lni-angle-double-left"></i>
                            </a>
                            <a href="?page={{ page_obj.previous_page_number }}"
                               class="btn btn-sm btn-circle bg-gradient-to-br from-secondary to-accent text-white shadow-md hover:scale-110 transition-transform duration-200"
                               title="Previous Page">
                                <i class="lni lni-chevron-left"></i>
                            </a>
                        {% else %}
                            <button class="btn btn-sm btn-circle btn-disabled bg-base-200 text-base-content/40">
                                <i class="lni lni-angle-double-left"></i>
                            </button>
                            <button class="btn btn-sm btn-circle btn-disabled bg-base-200 text-base-content/40">
                                <i class="lni lni-chevron-left"></i>
                            </button>
                        {% endif %}

                        <span class="mx-2 px-4 py-1 rounded-full bg-gradient-to-r from-primary/20 to-accent/20 text-primary font-bold text-base shadow animate-gradient-x tracking-wide select-none">
                            Page {{ page_obj.number }} <span class="text-base-content/60">/</span> {{ page_obj.paginator.num_pages }}
                        </span>

                        {% if page_obj.has_next %}
                            <a href="?page={{ page_obj.next_page_number }}"
                               class="btn btn-sm btn-circle bg-gradient-to-br from-accent to-secondary text-white shadow-md hover:scale-110 transition-transform duration-200"
                               title="Next Page">
                                <i class="lni lni-chevron-right"></i>
                            </a>
                            <a href="?page={{ page_obj.paginator.num_pages }}"
                               class="btn btn-sm btn-circle bg-gradient-to-br from-secondary to-primary text-white shadow-md hover:scale-110 transition-transform duration-200"
                               title="Last Page">
                                <i class="lni lni-angle-double-right"></i>
                            </a>
                        {% else %}
                            <button class="btn btn-sm btn-circle btn-disabled bg-base-200 text-base-content/40">
                                <i class="lni lni-chevron-right"></i>
                            </button>
                            <button class="btn btn-sm btn-circle btn-disabled bg-base-200 text-base-content/40">
                                <i class="lni lni-angle-double-right"></i>
                            </button>
                        {% endif %}
                    </nav>
                    <style>
                        @keyframes gradient-x {
                            0%, 100% { background-position: 0% 50%; }
                            50% { background-position: 100% 50%; }
                        }
                        .animate-gradient-x {
                            background-size: 200% 200%;
                            animation: gradient-x 3s ease-in-out infinite;
                        }
                        @keyframes fade-in {
                            from { opacity: 0; transform: scale(0.95);}
                            to { opacity: 1; transform: scale(1);}
                        }
                        .animate-fade-in {
                            animation: fade-in 1s cubic-bezier(0.4,0,0.2,1);
                        }
                    </style>
                </div>
                {% endif %}
            {% else %}
                <div
                    class="alert bg-gradient-to-r from-primary/10 via-secondary/10 to-accent/10 border-0 shadow-xl rounded-2xl px-8 py-6 flex items-center justify-center animate-fade-in"
                    x-data="{ show: false }"
                    x-init="setTimeout(() => show = true, 200)"
                    x-show="show"
                    x-transition:enter="transition-all duration-700 ease-out"
                    x-transition:enter-start="opacity-0 scale-90 -translate-y-8"
                    x-transition:enter-end="opacity-100 scale-100 translate-y-0"
                >
                    <div class="flex items-center gap-4 relative">
                        <!-- Animated Icon Glow -->
                        <span class="absolute -top-3 -left-3 w-12 h-12 bg-accent/30 rounded-full blur-xl animate-pulse-slow"></span>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-accent flex-shrink-0 w-10 h-10 drop-shadow-lg animate-bounce-slow">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <span class="text-lg md:text-xl font-semibold bg-gradient-to-r from-primary via-secondary to-accent bg-clip-text text-transparent animate-gradient-x">
                            No posts available. <span class="font-bold text-accent">Check back soon</span> for new content!
                        </span>
                        <!-- Decorative Sparkle -->
                        <span class="absolute -bottom-2 right-0 w-8 h-8 bg-primary/30 rounded-full blur-md animate-sparkle"></span>
                    </div>
                    <style>
                        @keyframes fade-in {
                            from { opacity: 0; transform: scale(0.9) translateY(-20px);}
                            to { opacity: 1; transform: scale(1) translateY(0);}
                        }
                        .animate-fade-in {
                            animation: fade-in 1s cubic-bezier(0.4,0,0.2,1);
                        }
                        @keyframes gradient-x {
                            0%, 100% { background-position: 0% 50%; }
                            50% { background-position: 100% 50%; }
                        }
                        .animate-gradient-x {
                            background-size: 200% 200%;
                            animation: gradient-x 3s ease-in-out infinite;
                        }
                        @keyframes bounce-slow {
                            0%, 100% { transform: translateY(0);}
                            50% { transform: translateY(-10px);}
                        }
                        .animate-bounce-slow {
                            animation: bounce-slow 2.5s infinite;
                        }
                        @keyframes pulse-slow {
                            0%, 100% { opacity: 0.5; transform: scale(1);}
                            50% { opacity: 1; transform: scale(1.1);}
                        }
                        .animate-pulse-slow {
                            animation: pulse-slow 4s cubic-bezier(0.4,0,0.2,1) infinite;
                        }
                        @keyframes sparkle {
                            0%, 100% { opacity: 0.7; transform: scale(1) rotate(0deg);}
                            50% { opacity: 1; transform: scale(1.2) rotate(15deg);}
                        }
                        .animate-sparkle {
                            animation: sparkle 2.5s ease-in-out infinite;
                        }
                    </style>
                </div>
            {% endif %}
        </div>

        <!-- Sidebar -->
        <div class="lg:w-1/4 space-y-8">            <!-- Search Widget -->
            <div class="card bg-base-100 shadow-xl border border-primary/10">
                <div class="card-body">
                    <h3 class="card-title text-lg font-bold mb-4 flex items-center gap-2 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent">
                        <i class="lni lni-search-alt text-primary"></i>
                        Search
                    </h3>
                    <form action="{% url 'blog:search_posts' %}" method="get" autocomplete="off">
                        <div class="relative flex items-center mb-3">
                            <input
                                type="text"
                                name="q"
                                placeholder="Search articles..."
                                class="input input-bordered w-full pr-12 bg-base-200/70 focus:bg-white focus:ring-2 focus:ring-primary/40 transition-all duration-200 rounded-full shadow-inner"
                                value="{{ request.GET.q }}"
                                required
                            >
                            <button
                                type="submit"
                                class="absolute right-1 top-1/2 -translate-y-1/2 btn btn-sm btn-circle bg-gradient-to-br from-primary via-secondary to-accent text-white shadow-md hover:scale-110 transition-transform duration-200"
                                aria-label="Search"
                            >
                                <i class="lni lni-search-alt"></i>
                            </button>
                        </div>
                        <!-- Quick Filters -->
                        <div class="space-y-2">
                            <select name="category" class="select select-bordered select-sm w-full" onchange="this.form.submit()">
                                <option value="">All Categories</option>
                                {% for category in categories %}
                                <option value="{{ category.slug }}" {% if request.GET.category == category.slug %}selected{% endif %}>
                                    {{ category.name }}
                                </option>
                                {% endfor %}
                            </select>
                            <select name="sort" class="select select-bordered select-sm w-full" onchange="this.form.submit()">
                                <option value="newest" {% if request.GET.sort == 'newest' or not request.GET.sort %}selected{% endif %}>
                                    Newest First
                                </option>
                                <option value="popular" {% if request.GET.sort == 'popular' %}selected{% endif %}>
                                    Most Popular
                                </option>
                                <option value="title" {% if request.GET.sort == 'title' %}selected{% endif %}>
                                    Title A-Z
                                </option>
                            </select>
                        </div>
                        {% if request.GET.q or request.GET.category or request.GET.sort != 'newest' %}
                        <div class="mt-3">
                            <a href="{% url 'blog:blog_list' %}" class="btn btn-sm btn-outline w-full">
                                <i class="lni lni-reload mr-1"></i>
                                Clear Filters
                            </a>
                        </div>
                        {% endif %}
                    </form>
                </div>
            </div>

            <!-- Categories Widget -->
            <div class="card bg-base-100 shadow-xl border border-primary/10">
                <div class="card-body">
                    <h3 class="card-title text-lg font-bold mb-4 flex items-center gap-2 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
                        <i class="lni lni-folder text-primary"></i>
                        Categories
                    </h3>
                    <ul class="space-y-2">
                        {% for category in categories %}
                        <li>
                            <a href="{% url 'blog:category_posts' category.slug %}"
                               class="flex items-center justify-between px-4 py-2 rounded-lg hover:bg-gradient-to-r hover:from-primary/10 hover:to-accent/10 transition-all duration-200 group"
                            >
                                <span class="flex items-center gap-2 font-medium group-hover:text-primary transition-colors">
                                    <i class="lni lni-chevron-right text-xs text-accent group-hover:translate-x-1 transition-transform"></i>
                                    {{ category.name }}
                                </span>
                                <span class="badge badge-sm bg-gradient-to-r from-primary to-accent text-white font-semibold shadow group-hover:scale-110 transition-transform">
                                    {{ category.posts.count }}
                                </span>
                            </a>
                        </li>
                        {% empty %}
                        <li class="text-base-content/60">No categories available</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>

            <!-- Recent Posts Widget -->
            <div class="card bg-base-100 shadow-xl border border-primary/10">
                <div class="card-body">
                    <h3 class="card-title text-lg font-bold mb-4 flex items-center gap-2 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent">
                        <i class="lni lni-clock text-accent"></i>
                        Recent Posts
                    </h3>
                    <ul class="space-y-4">
                        {% for post in recent_posts %}
                        <li class="flex items-center gap-3 group">
                            {% if post.featured_image %}
                            <a href="{% url 'blog:post_detail' post.slug %}" class="block flex-shrink-0 w-14 h-14 rounded-lg overflow-hidden ring-2 ring-primary/20 group-hover:ring-accent/40 transition-all duration-200 shadow">
                                <img src="{{ post.featured_image.url }}" alt="{{ post.title }}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
                            </a>
                            {% else %}
                            <a href="{% url 'blog:post_detail' post.slug %}" class="block flex-shrink-0 w-14 h-14 rounded-lg overflow-hidden bg-gradient-to-br from-primary/10 to-accent/10 flex items-center justify-center ring-2 ring-primary/10 group-hover:ring-accent/40 transition-all duration-200 shadow">
                                <i class="lni lni-text-format text-2xl text-primary/40"></i>
                            </a>
                            {% endif %}
                            <div class="flex-1 min-w-0">
                                <h4 class="font-semibold text-base line-clamp-2 leading-tight mb-1 group-hover:text-primary transition-colors">
                                    <a href="{% url 'blog:post_detail' post.slug %}" class="hover:underline">{{ post.title }}</a>
                                </h4>
                                <div class="flex items-center gap-2 text-xs text-base-content/60">
                                    <i class="lni lni-calendar text-primary"></i>
                                    <span>{{ post.published_at|date:"M d, Y" }}</span>
                                </div>
                            </div>
                        </li>
                        {% empty %}
                        <li class="text-base-content/60">No recent posts available</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>

            <!-- Popular Tags Widget -->
            <div class="card bg-base-100 shadow-xl border border-primary/10">
                <div class="card-body">
                    <h3 class="card-title text-lg font-bold mb-4 flex items-center gap-2 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
                        <i class="lni lni-tag text-accent"></i>
                        Popular Tags
                    </h3>
                    <div class="flex flex-wrap gap-2">
                        {% for tag in popular_tags %}
                        <a href="{% url 'blog:tag_posts' tag.slug %}"
                           class="badge badge-lg badge-outline px-4 py-2 rounded-full bg-gradient-to-r from-primary/10 to-accent/10 text-primary font-semibold shadow hover:bg-primary hover:text-white hover:shadow-lg transition-all duration-200 group"
                        >
                            <span class="inline-flex items-center gap-1">
                                <i class="lni lni-hashtag text-accent group-hover:text-white"></i>
                                {{ tag.name }}
                            </span>
                        </a>
                        {% empty %}
                        <p class="text-base-content/60">No tags available</p>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}